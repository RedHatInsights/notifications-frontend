import {
  Button,
  ButtonVariant,
  Card,
  CardBody,
  CardHeader,
  EmptyState,
  EmptyStateBody,
  EmptyStateFooter,
  EmptyStateHeader,
  EmptyStateIcon,
  Gallery,
  Icon,
  Text,
  TextContent,
  TextVariants,
} from '@patternfly/react-core';
import {
  ArrowRightIcon,
  CogIcon,
  CubesIcon,
  HelpIcon,
  InfrastructureIcon,
} from '@patternfly/react-icons';
import React from 'react';

import { Messages } from '../../properties/Messages';
import { Link } from 'react-router-dom';
import { useAppContext } from '../../app/AppContext';
import { SVGIconProps } from '@patternfly/react-icons/dist/esm/createIcon';

const EmptyIntegrationCard: React.FunctionComponent<{
  TitleIcon: React.ComponentClass<SVGIconProps, unknown>;
  title: string;
  body: string;
  link: string;
  isOrgAdmin: boolean;
}> = ({ TitleIcon, title, body, link, isOrgAdmin }) => {
  return (
    <Card
      isFullHeight
      isPlain
      style={{ maxWidth: isOrgAdmin ? '106ch' : '70ch' }}
    >
      <CardHeader>
        <Icon className="pf-v5-u-pl-sm pf-v5-u-pr-lg">
          <TitleIcon className="pf-v5-u-link-color" />
        </Icon>
        <TextContent>
          <Text component={TextVariants.h4}>{title}</Text>
        </TextContent>
      </CardHeader>
      <CardBody className="pf-v5-u-display-flex">
        <TextContent className="pf-v5-u-display-flex pf-v5-u-flex-direction-column pf-v5-u-align-self-stretch">
          <Text component={TextVariants.p} className="pf-v5-u-flex-grow-1">
            {body}
          </Text>
          <Text component={TextVariants.p}>
            <Link to={link} target="_blank">
              Learn more
              <Icon className="pf-v5-u-ml-sm" isInline>
                <ArrowRightIcon />
              </Icon>
            </Link>
          </Text>
        </TextContent>
      </CardBody>
    </Card>
  );
};

export const IntegrationsEmptyState: React.FunctionComponent<{
  onAddIntegration: (() => void) | undefined;
}> = ({ onAddIntegration }) => {
  const { isOrgAdmin } = useAppContext();
  return (
    <div className="pf-v5-l-flex pf-m-justify-content-center">
      <EmptyState>
        <EmptyStateHeader
          titleText="No integrations yet"
          icon={<EmptyStateIcon icon={CubesIcon} />}
          headingLevel={TextVariants.h4}
        />
        <EmptyStateBody>
          <Gallery
            aria-label="Card container"
            minWidths={{ default: '100%', md: isOrgAdmin ? '30%' : '40%' }}
            hasGutter
            className="pf-v5-u-text-align-left"
          >
            <EmptyIntegrationCard
              isOrgAdmin={isOrgAdmin}
              TitleIcon={HelpIcon}
              title="Why integrate?"
              body="Integrating third-party applications expands the scope of notifications beyond emails and messages, so that you can view and manage Hybrid Cloud Console events from your preferred platform dashboard."
              link="https://access.redhat.com/documentation/en-us/red_hat_hybrid_cloud_console/2023/html/integrating_the_red_hat_hybrid_cloud_console_with_third-party_applications"
            />
            <EmptyIntegrationCard
              isOrgAdmin={isOrgAdmin}
              TitleIcon={CogIcon}
              title="Configure applications"
              body="To prepare for integration with the Hybrid Cloud Console, you must configure incoming webhooks in your third-party applications."
              link="https://access.redhat.com/documentation/en-us/red_hat_hybrid_cloud_console/2023/html/configuring_notifications_on_the_red_hat_hybrid_cloud_console/assembly-intro_notifications"
            />
            {isOrgAdmin && (
              <EmptyIntegrationCard
                isOrgAdmin={isOrgAdmin}
                TitleIcon={InfrastructureIcon}
                title="Create behavior groups"
                body="A behavior group defines which notifications will be sent to external services when a specific event is received by the notifications service. You can link events from any Hybrid Cloud Console service to your behavior group."
                link="https://access.redhat.com/documentation/en-us/red_hat_hybrid_cloud_console/2023/html/configuring_notifications_on_the_red_hat_hybrid_cloud_console/assembly-config-behavior-groups_notifications"
              />
            )}
          </Gallery>
        </EmptyStateBody>
        <EmptyStateFooter>
          <Button
            variant={ButtonVariant.primary}
            component="a"
            disabled={!onAddIntegration}
            onClick={() => (onAddIntegration ? onAddIntegration() : null)}
          >
            {Messages.components.integrations.toolbar.actions.addIntegration}
          </Button>
        </EmptyStateFooter>
      </EmptyState>
    </div>
  );
};
